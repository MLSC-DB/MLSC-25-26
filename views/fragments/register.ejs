<link
  href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap"
  rel="stylesheet"
/>
<div
  class="register-popup wide-popup retro-popup"
  style="
    max-width: 2100px;
    min-width: 400px;
    width: 100%;
    min-height: 90vh;
    margin: 0 auto;
    padding: 3.5rem 3rem;
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
  "
>
  <h1 class="tech-header">
    <span class="tech-title">MLSC</span>
    <span class="society-title">REGISTRATIONS</span>
  </h1>
  <form class="retro-form" autocomplete="off">
    <div class="retro-form-group">
      <label for="name">Name</label>
      <input
        id="name"
        name="name"
        type="text"
        placeholder="Your Name"
        required
      />
    </div>
    <div class="retro-form-group">
      <label for="email">E-mail</label>
      <input
        id="email"
        name="email"
        type="email"
        placeholder="you@example.com"
        required
      />
    </div>
    <div class="retro-form-group">
      <label for="contact">Contact</label>
      <input
        id="contact"
        name="contact"
        type="text"
        placeholder="+91"
        required
      />
    </div>
    <div class="retro-form-group">
      <label for="year">Year Of Study</label>
      <select id="year" name="year" required>
        <option value="" selected disabled>Year of Study</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
      </select>
    </div>
    <div class="retro-form-group">
      <label for="preference1">Preference 1</label>
      <select id="preference1" name="preference1" required>
        <option value="" selected disabled>Department Preference</option>
        <option>Tech</option>
        <option>Design</option>
        <option>Management</option>
      </select>
    </div>
    <div class="retro-form-group">
      <label for="preference2">Preference 2</label>
      <select id="preference2" name="preference2" required>
        <option value="" selected disabled>Department Preference</option>
        <option>Tech</option>
        <option>Design</option>
        <option>Management</option>
      </select>
    </div>
    <div class="retro-form-group">
      <label for="preference3">Preference 3</label>
      <select id="preference3" name="preference3" required>
        <option value="" selected disabled>Department Preference</option>
        <option>Tech</option>
        <option>Design</option>
        <option>Management</option>
      </select>
    </div>
    <div class="retro-form-group">
      <label for="projects">Projects</label>
      <input
        id="projects"
        name="projects"
        type="text"
        placeholder="Describe your projects"
        required
      />
    </div>
    <div class="retro-form-group">
      <label for="why">Why?</label>
      <input
        id="why"
        name="why"
        type="text"
        placeholder="Why do you want to join MLSC?"
        required
      />
    </div>
    <button type="submit" class="retro-btn">
      <span class="glow">SUBMIT</span>
    </button>
  </form>
</div>

<script>
  const fields = document.querySelectorAll("input, textarea");
  const fakeCaret = document.createElement("div");
  fakeCaret.classList.add("fake-caret");
  document.body.appendChild(fakeCaret);

  fields.forEach((field) => {
    field.addEventListener("focus", () => {
      fakeCaret.style.display = "block";
      updateCaret(field);
    });

    field.addEventListener("blur", () => {
      fakeCaret.style.display = "none";
    });

    ["input", "click", "keyup"].forEach((evt) => {
      field.addEventListener(evt, () => updateCaret(field));
    });
  });

  function updateCaret(field) {
    const { selectionStart } = field;
    const style = getComputedStyle(field);

    // Build mirror span
    const mirror = document.createElement("span");
    mirror.style.position = "absolute";
    mirror.style.visibility = "hidden";
    mirror.style.whiteSpace = "pre";
    mirror.style.font = style.font;
    mirror.style.fontSize = style.fontSize;
    mirror.style.fontFamily = style.fontFamily;
    mirror.style.letterSpacing = style.letterSpacing;

    // Fake container for alignment
    const container = document.createElement("div");
    container.style.position = "absolute";
    container.style.visibility = "hidden";
    container.style.whiteSpace = "pre";
    container.style.font = style.font;
    container.style.width = style.width;
    container.style.padding = style.padding;
    container.style.border = style.border;

    // Text up to caret
    mirror.textContent = field.value.substring(0, selectionStart) || ".";
    container.appendChild(mirror);
    document.body.appendChild(container);

    const mirrorRect = mirror.getBoundingClientRect();
    const fieldRect = field.getBoundingClientRect();

    // Place Mario correctly
    fakeCaret.style.left = `${fieldRect.left + mirrorRect.width - 3}px`;
    fakeCaret.style.top = `${fieldRect.top + (fieldRect.height - 20) / 2}px`;

    container.remove();
  }
</script>

<style>
  body {
    overflow: hidden;
  }
  .retro-popup {
    background: linear-gradient(135deg, #001f3f 80%, #003366 100%);
    color: #ffffff;
    border-radius: 12px;
    padding: 2.5rem 1.5rem;
    position: relative;
    max-width: 900px;
    min-width: 280px;
    width: 100%;
    min-height: 100vh;
    margin: 0 auto;
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 6px solid #00bfff;
    border-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><rect x="0" y="0" width="8" height="8" fill="none" stroke="%2300bfff" stroke-width="2"/><rect x="2" y="2" width="4" height="4" fill="none" stroke="%2300bfff" stroke-width="1"/></svg>')
      6 stretch;
    box-shadow: 0 0 24px #00bfff88, 0 0 0 2px #00bfff;
    font-family: "Press Start 2P", "VT323", monospace;
  }
  .retro-popup::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background-image: linear-gradient(
        to right,
        rgba(0, 191, 255, 0.08) 1px,
        transparent 1px
      ),
      linear-gradient(to bottom, rgba(0, 191, 255, 0.08) 1px, transparent 1px);
    background-size: 16px 16px;
    z-index: 0;
    border-radius: 12px;
  }
  .tech-header {
    font-family: "Press Start 2P", monospace;
    font-size: 2.5rem;
    margin-bottom: 1.2rem;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
    z-index: 1;
    line-height: 1.1;
  }
  .tech-title {
    color: #00bfff;
    text-shadow: 0 0 8px #00bfff, 0 0 24px #00eaff, 0 0 2px #fff;
    font-weight: bold;
    font-size: 2.5rem;
    margin-right: 0.5rem;
    letter-spacing: 2px;
    display: inline-block;
  }
  .society-title {
    color: #ccd6f6;
    text-shadow: 0 0 5px #00bfff, 0 0 10px #00bfff;
    font-weight: bold;
    font-size: 2.5rem;
    display: inline-block;
  }
  .register-title {
    color: #00eaff;
    font-size: 1.2rem;
    margin-top: 0.5rem;
    text-shadow: 0 0 6px #00eaff;
    font-family: "VT323", monospace;
    letter-spacing: 1px;
  }

  /* TECH SOCIETY header styles */
  .tech-header {
    font-family: "Press Start 2P", monospace;
    font-size: 2.5rem;
    margin-bottom: 1.2rem;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
    z-index: 1;
    line-height: 1.1;
  }
  .tech-title {
    color: #00bfff;
    text-shadow: 0 0 8px #00bfff, 0 0 24px #00eaff, 0 0 2px #fff;
    font-weight: bold;
    font-size: 2.5rem;
    margin-right: 0.5rem;
    letter-spacing: 2px;
    display: inline-block;
  }
  .society-title {
    color: #ccd6f6;
    text-shadow: 0 0 5px #00bfff, 0 0 10px #00bfff;
    font-weight: bold;
    font-size: 2.5rem;
    display: inline-block;
  }

  .retro-heading {
    font-family: "Press Start 2P", monospace;
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-align: center;
    color: #00bfff;
    text-shadow: 0 0 8px #00bfff, 0 0 24px #00eaff, 0 0 2px #fff;
    letter-spacing: 2px;
    z-index: 1;
  }

  .retro-form {
    width: 100%;
    max-width: 420px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
    z-index: 1;
  }

  .retro-form-group {
    margin-bottom: 1.2rem;
    display: flex;
    flex-direction: column;
  }

  .retro-form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #00eaff;
    text-shadow: 0 0 4px #007bff;
    font-family: "VT323", monospace;
    letter-spacing: 1px;
  }

  .retro-form-group input,
  .retro-form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #00bfff;
    border-radius: 3px;
    background-color: rgba(13, 37, 63, 0.7);
    color: #ccd6f6;
    font-size: 1rem;
    font-family: "VT323", monospace;
    image-rendering: pixelated;
    box-shadow: 0 0 6px #00bfff44;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .retro-form-group input:focus,
  .retro-form-group select:focus {
    border-color: #00eaff;
    outline: none;
    box-shadow: 0 0 10px #00eaff88;
  }

  .retro-btn {
    background: linear-gradient(90deg, #007bff 60%, #00eaff 100%);
    color: #fff;
    font-family: "Press Start 2P", monospace;
    text-shadow: 0 0 6px #00eaff;
    box-shadow: 0 0 12px #007bff88;
    border: 2px solid #00eaff;
    border-radius: 3px;
    font-size: 1.25rem;
    cursor: pointer;
    transition: background 0.3s, box-shadow 0.3s;
    width: 100%;
    padding: 0.75rem 1.5rem;
    letter-spacing: 1px;
  }
  .retro-btn:hover {
    background: linear-gradient(90deg, #00eaff 60%, #007bff 100%);
    box-shadow: 0 0 18px #00eaffcc;
  }

  @media (max-width: 600px) {
    .retro-popup {
      max-width: 100vw;
      min-width: 0;
      padding: 1rem 0.2rem;
      border-radius: 0.7rem;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .retro-form {
      max-width: 100vw;
      padding: 0;
    }
    .retro-heading {
      font-size: 1.2rem;
    }
  }

  .fake-caret {
    position: absolute;
    width: 2px;
    height: 1.2em;
    background-color: #007bff;
    pointer-events: none;
    display: none;
  }
</style>
